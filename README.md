# Data_buffer

Библиотека для создания текстовых и бинарных буферов для дальнейшей записи буфера в файл или для последующего использования

### Подключение

Для начала нужно склонировать репозиторий с библиотекой в ваш проект используя следующую команду:
```git
    git clone --recurse-submodules https://github.com/dmitry131131/Data_buffer.git
```

Если текущий URL устарел, просто скопируйте актуальный URL с текущей страницы на GitHub

Для сборки библиотеки с помощью Makefile необходимо прописать команду:
```git
    make
```

После чего библиотека соберётся и её можно будет подключить в ваш проект.
Для этого в папке `build` библиотеки DataBuffer появится файл `libDataBuffer.a` - это файл статической библиотеки, который вам необходимо подключить в ваш проект с помощью следующих флагов:
```bash
    -L<папка_с_файлом_статической_библиотеки> -lDataBuffer 
```
<b style="color:red">Обратите внимание</b>, что название статической библиотеки стоит писать без приставки  `lib` и без постфикса `.a`

### Использование

Основной объект в этой библиотеке - `outputBuffer` 
```c
struct outputBuffer {
    char* Buffer;
    size_t bufferPointer;
    int fileDescriptor;
    bool AUTO_FLUSH;
};
```
В нём находятся 4 поля - указатель на буфер, номер текущей позиции в буфере, указатель на файл, в который будет записан буфер и флаг автоматического сброса буфера в файл по внутреннему указателю.

##### Основные функции
`int create_output_file(FILE** file, const char* filename, fileCreateMode modeCode)` функция создаёт файл в одном из двух режимов:

Параметр  | Описание
:---------|------------:
TEXT      | текстовый режим создания файла - соответствует флагу "w"
BIN       | бинарный режим создания файла - соответствует флагу "wb"

`int print_to_buffer(outputBuffer* buffer, const char* format, ...)` функция печатает в буфер аналогично функции printf()

`int write_char_to_buffer(outputBuffer* buffer, unsigned char num)` функция печатает однобайтовый символ в буфер, чаще всего используется с бинарными файлами

`int write_int_to_buffer(outputBuffer* buffer, int num)` функция печатает число(int) в буфер, чаще всего используется с бинарными файлами

`int write_double_to_buffer(outputBuffer* buffer, double num)` функция печатает вещественное число(double) в буфер, чаще всего используется с бинарными файлами

`int write_buffer_to_file(FILE* file, outputBuffer* buffer)` функция записывает содержимое буфера в файл, который был ей передан в качестве аргумента. Важно, что функция не очищает буфер после переписывания его в файл.

`int clean_buffer(outputBuffer* buffer)` функция очищает буфер, заполняя его нулями
